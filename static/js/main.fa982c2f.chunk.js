(this.webpackJsonpaqm=this.webpackJsonpaqm||[]).push([[0],{20:function(t,e,i){},22:function(t,e,i){},28:function(t,e,i){"use strict";i.r(e);var a=i(1),c=i.n(a),n=i(11),s=i.n(n),r=(i(20),i(21),i(22),i(2)),o=i(5),l=i(6),h=i(8),d=i(7),j=i(30),u=i(12),b=i(3),p=i.n(b),y=i(10),O=i.n(y),x=i(13),q=i.n(x),v=i(0),f=function(t){Object(h.a)(i,t);var e=Object(d.a)(i);function i(){var t;Object(o.a)(this,i);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(t=e.call.apply(e,[this].concat(c))).state={chartOptions:{chart:{type:"spline"},title:{text:"AQI For City"},time:{useUTC:!1},xAxis:{title:{text:"Time"},type:"datetime",tickPixelInterval:150},yAxis:{title:{text:"AQI"},plotLines:[{value:0,width:1,color:"#808080"}]},series:[{data:[]}]}},t}return Object(l.a)(i,[{key:"render",value:function(){if(this.props.cityAqi){var t=this.props.cityAqi.aqis.map((function(t){return{x:p()(t.lastUpdated).unix(),y:Number(t.aqi)}}));return Object(v.jsx)("div",{children:Object(v.jsx)(q.a,{highcharts:O.a,options:Object(r.a)(Object(r.a)(Object(r.a)({},this.state.chartOptions),{title:{text:"AQI For "+this.props.cityAqi.cityName}}),{},{series:[{name:"AQI For ".concat(this.props.cityAqi.cityName),data:t}]})})})}return Object(v.jsx)("div",{})}}]),i}(c.a.Component),m=new u.w3cwebsocket("wss://city-ws.herokuapp.com"),A=function(t){Object(h.a)(i,t);var e=Object(d.a)(i);function i(){var t;Object(o.a)(this,i);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(t=e.call.apply(e,[this].concat(c))).state={aqi:[],chartData:null,historicalCityAqis:{}},t}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var t=this;m.onopen=function(){console.log("WebSocket Client Connected")},m.onmessage=function(e){var i=JSON.parse(e.data||"[]");if(i.length){var a={aqi:t.state.aqi,historicalCityAqis:t.state.historicalCityAqis};i.map((function(t){var e=a.aqi.find((function(e){return e.city===t.city}));if(e){e.city=t.city,e.aqi=parseFloat(t.aqi).toFixed(2),e.lastUpdated=p()().toISOString();var i=Object.assign({},e);return a.historicalCityAqis[t.city].push(i),null}var c=Object(r.a)(Object(r.a)({},t),{},{lastUpdated:p()().toISOString(),aqi:parseFloat(t.aqi).toFixed(2)});return a.aqi.push(c),a.historicalCityAqis[c.city]=[Object.assign({},c)],null})),t.setState(Object(r.a)({},a))}}}},{key:"getAqiRenderColor",value:function(t){return t<50?"aqi-good":t<100?"aqi-satisfactory":t<200?"aqi-moderate":t<300?"aqi-poor":t<400?"aqi-very-poor":t<500?"aqi-severe":void 0}},{key:"loadChart",value:function(t){this.setState({chartData:{cityName:t.city,aqis:this.state.historicalCityAqis[t.city]}})}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-lg-4 col",children:[Object(v.jsx)("h6",{className:"text-center",children:" Click on any city to see AQI live. "}),Object(v.jsxs)(j.a,{bordered:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"City"}),Object(v.jsx)("th",{children:"Current AQI"}),Object(v.jsx)("th",{children:"Last Updated"})]})}),Object(v.jsx)("tbody",{children:this.state.aqi.map((function(e,i){return Object(v.jsxs)("tr",{onClick:function(){t.loadChart(e)},children:[Object(v.jsx)("td",{children:Object(v.jsx)("b",{children:e.city})}),Object(v.jsx)("td",{className:t.getAqiRenderColor(e.aqi),children:Object(v.jsx)("b",{children:e.aqi})}),Object(v.jsx)("td",{className:"last-updated",children:p()(e.lastUpdated).fromNow()})]},"aqi-city-".concat(i,"-").concat(e.city))}))})]})]}),Object(v.jsx)("div",{className:"col-lg-8 col",children:this.state.chartData&&Object(v.jsx)(f,{cityAqi:this.state.chartData})})]})}}]),i}(c.a.Component);var C=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)("header",{className:"container-fluid mt-4",children:Object(v.jsx)(A,{})})})},g=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,31)).then((function(e){var i=e.getCLS,a=e.getFID,c=e.getFCP,n=e.getLCP,s=e.getTTFB;i(t),a(t),c(t),n(t),s(t)}))};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root")),g()}},[[28,1,2]]]);
//# sourceMappingURL=main.fa982c2f.chunk.js.map